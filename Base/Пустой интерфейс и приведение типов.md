11.09.2024 23:55
Tags: #info

---
# Пустой интерфейс и приведение типов
Бывают ситуации, когда не всегда можно указать конкретные типы переменных. Например, если получаем JSON-документ от пользователя, то структура этого документа может быть любой.
Разрешить функции произвольный параметр можно с помощью пустого интерфейса - `interface{}`. Однако использовать переменную типа пустого интерфейса невозможно.
```go
func PassAnyType(v interface{}) {
    // ...
}
```
В Go 1.18 у типа `interface{}` появился более короткий псевдоним - `any`

Возвращаясь к переменной `v`. Для какого-либо взаимодействия с ней необходимо привести ее к какому-либо типу оператором `v.(type)`
Оператор приведения типа приводит переменную интерфейсного типа к конкретному типу или другому интерфейсу:
```go
func PassAnyType(v interface{}) {
    i := v.(int)     // если v не число, то будет паника, то есть программа не сможет работать и прекратит выполнение

    i, ok := v.(int) // альтернативный формат: если v не число, то будет false
                     // паники не будет 
    if ok {
        // ...
    }
}
```
Второй вариант более предпочтителен. Также хорошей практикой является Защита типа с помощью оператора `switch`:
```go
func Printf(v interface{}) {
    switch v2 := v.(type) {
    case int:
        fmt.Print("Это число " + strconv.FormatInt(v2, 10))
    case string:
        fmt.Print("Это строка " + v2)
    case Stringer:
        fmt.Print("Это тип, реализующий Stringer, " + v2.String())
    default:
        fmt.Print("Неизвестный тип")
    }
}
```

---
### Zero-links:
[[00 Backend]] [[00 Golang]]

---
### Links:
[[Интерфейсы]]